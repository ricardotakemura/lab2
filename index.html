<!DOCTYPE html>
<html>
    <header>
        <title>Desafio Front-end</title>
        <meta charset="UTF-8"></meta>
        <link rel="stylesheet" href="./css/main.css"/>
        <script src="./js/jquery-3.5.1.min.js"></script>
        <script src="./js/main.js"></script>
        <script src="./js/call.js"></script>
    </header>
    <body>
        <div class="head">
            <img src="./img/sensedia.png" alt="sensedia" width="100"/><span class="title">Desafio Front-end</span>
        </div>
        <div class="body">
            <div id="question1" class="question">
                <strong>Adicione ao estilo, um c&oacute;digo para que se crie uma anima&ccedil;&atilde;o que d&ecirc; a impress&atilde;o que o "Luigi" esteja andando.</strong>
                <p>Imagem utilizada (360x260): <a target="_blank" href="./img/luigi.png">luigi.png</a></p>
                <style id="css_question1">
                .luigi{
                    width: 180px;
                    height: 260px;
                    background: url(./img/luigi.png);
                }           
                </style>
                <div class="left">
                    <div id="person" class="luigi"></div>
                </div>
                <div class="right">
                    <p>
<textarea id="code_question1">.luigi{
    width: 180px;
    height: 260px;
    background: url(./img/luigi.png);
    animation: walk_luigi 0.2s steps(2) infinite;
}
@keyframes walk_luigi {
    from {background-position: 0px 0px;}
    to {background-position: -360px 0px;}
}</textarea>
                    </p>
                    <p>
                        <button id="run_question1" class="run">Run</button>
                    </p>
                </div>
            </div>
            <div id="question2" class="question">
                <strong>O atual c&oacute;digo aparentemente n&atilde;o funciona... Voc&ecirc; pode verificar o por que e corrigi-lo?</strong>
                <div class="left">
                    <p><label for="digit">Digite um n&uacute;mero:</label><input type="text" id="digit" name="digit" maxlength="1"/><button id="btn_extenso">Por Extenso</button></p>
                    <p>O valor por extenso &eacute;: <span id="extenso">-</span></p>
                </div>
                <div class="right">                    
                    <p>
<textarea id="code_question2">$('#btn_extenso').click(() => {
    let digit = parseInt($("#digit").val());
    if (isNaN(digit)) {
        $("#extenso").text('Não é um número');
    } else {
        if (digit === 0) {
            $("#extenso").text('Zero');
        } else if (digit === 1) {
            $("#extenso").text('Um');
        } else if (digit === 2) {
            $("#extenso").text('Dois');
        } else if (digit === 3) {
            $("#extenso").text('Três');
        } else if (digit === 4) {
            $("#extenso").text('Quatro');
        } else if (digit === 5) {
            $("#extenso").text('Cinco');
        } else if (digit === 6) {
            $("#extenso").text('Seis');
        } else if (digit === 7) {
            $("#extenso").text('Sete');
        } else if (digit === 8) {
            $("#extenso").text('Oito');
        } else if (digit === 9) {
            $("#extenso").text('Nove');
        }   
    }
});</textarea>
                    </p>
                    <p>
                        <button id="run_question2" class="run">Run</button>
                    </p>
                </div>
            </div>
            <div id="question3" class="question">
                <strong>Chame a API GET "/call.json" e responda as seguintes quest&otilde;es</strong>
                <p>Estrutura da chamada: <a target="_blank" href="./js/call.json">call.json</a></p>
                <div class="left">
                    <ol>
                        <li><p>Quantas chamadas foram realizadas com sucesso (status 200 e 201)?</p>
                        <p>Resp: &nbsp;<span id="resposta1">-</span></p></li>
                        <li><p>Quantas chamadas para DELETE /user deram erro (status 500)?</p>
                        <p>Resp: &nbsp;<span id="resposta2">-</span></p></li>
                        <li><p>Qual &eacute; a porcentagem de chamadas que deram o erro "n&atilde;o autorizado" (status 401)?</p>
                        <p>Resp: &nbsp;<span id="resposta3">-</span></p></li>
                        <li><p>Qual foi a API (m&eacute;todo e caminho) que mais deu erro de "n&atilde;o encontrado" (status 404)?</p>
                        <p>Resp: &nbsp;<span id="resposta4">-</span></p></li>
                    </ol>
                </div>
                <div class="right">                    
                    <p>
<textarea id="code_question3">$.get('/call.json', (data) => {
    let result = JSON.parse(data);
    let resposta1 = result.calls.filter(call => call.status === '200' || call.status === '201').length;
    $('#resposta1').text(resposta1);
    let resposta2 = result.calls.filter(call => call.method == 'DELETE' && call.endpoint== '/users' && call.status === '500').length;
    $('#resposta2').text(resposta2);
    let resposta3 = (result.calls.filter(call => call.status === '401').length / result.count  * 100) + '%';
    $('#resposta3').text(resposta3);
    let apis = result.calls.filter(call => call.status === '404');
    let counter = {};
    apis.forEach((item) => {
        if (counter[item.method + ' ' + item.endpoint]) {
            counter[item.method + ' ' + item.endpoint] += 1;
        } else {
            counter[item.method + ' ' + item.endpoint] = 1;
        }
    });
    let max = 0;
    let resposta4 = '';
    for (let key in counter) {
        if (counter[key] > max) {
            max = counter[key];
            resposta4 = key;
        }
    }
    $('#resposta4').text(resposta4);
});</textarea>
                    </p>
                    <p>
                        <button id="run_question3" class="run">Run</button>
                    </p>
                </div>                
            </div>
        </div>
    </body>
</html>